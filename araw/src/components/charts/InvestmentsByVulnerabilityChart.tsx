"use client";

import { BarChart, Bar, XAxis, YAxis, CartesianGrid, ResponsiveContainer, Tooltip, Cell, LabelList } from 'recharts';

// Data matching the screenshot proportions - ordered from top to bottom to match mockup
const vulnerabilityData = [
  { level: 'Very High', amount: 85, color: '#7f1d1d' },
  { level: 'High', amount: 70, color: '#f97316' },
  { level: 'Moderate', amount: 55, color: '#eab308' },
  { level: 'Low', amount: 30, color: '#bef264' },
  { level: 'Very Low', amount: 15, color: '#dcfce7' }
];

export function InvestmentsByVulnerabilityChart() {
  return (
    <ResponsiveContainer width="100%" height="100%">
      <BarChart
        data={vulnerabilityData}
        layout="vertical"
        margin={{ top: 5, right: 20, left: 20, bottom: 5 }}
        barSize={32}
        barCategoryGap="1%"
        barGap={0}
      >
        <CartesianGrid strokeDasharray="2 6" stroke="#eeeeee" vertical={false} />
        <XAxis
          type="number"
          domain={[0, 90]}
          ticks={[0, 10, 30, 50, 70, 90]}
          tickFormatter={(value) => `₱${value}M`}
          axisLine={false}
          tickLine={false}
          tick={{ fill: '#6b7280', fontSize: 12 }}
        />
        <YAxis
          type="category"
          dataKey="level"
          axisLine={false}
          tickLine={false}
          tick={false}
          width={0}
        />
        <Tooltip
          wrapperStyle={{ outline: 'none' }}
          // eslint-disable-next-line @typescript-eslint/no-explicit-any
          formatter={(value: number, name: string, props: any) => [
            `₱${value}M`,
            `${props.payload.level} Vulnerability`
          ]}
        />
        <Bar dataKey="amount" radius={[2, 2, 2, 2]}>
          {vulnerabilityData.map((entry, index) => (
            <Cell key={`cell-${index}`} fill={entry.color} />
          ))}
          <LabelList 
            dataKey="level" 
            position="insideLeft" 
            style={{ fontSize: 11, fontWeight: 600 }} 
            // eslint-disable-next-line @typescript-eslint/no-explicit-any
            content={(props: any) => {
              const { x, y, width, height, value } = props;
              const textColor = value === 'Very High' ? '#ffffff' : '#000000';
              return (
                <text 
                  x={x + 8} 
                  y={y + height / 2} 
                  fill={textColor} 
                  fontSize="11" 
                  fontWeight="600"
                  dominantBaseline="middle"
                >
                  {value}
                </text>
              );
            }}
          />
        </Bar>
      </BarChart>
    </ResponsiveContainer>
  );
}