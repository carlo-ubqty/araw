ARAW V3.0 Dashboard - Realignment with Figma Mockups
======================================================
Date: October 22, 2025
Session: Post-ARAW-318 Realignment

ISSUE IDENTIFIED:
-----------------
The "Financing and Emissions Trends" section was implemented as two separate chart cards,
but according to Figma mockup (Section O4), they should be in a SINGLE section container
with a section title at the top.

Current (Incorrect):
┌────────────────────┐  ┌────────────────────┐
│ FUNDS MOBILIZED    │  │ GHG LEVELS         │
│ (separate card)    │  │ (separate card)    │
└────────────────────┘  └────────────────────┘

Figma (Correct):
┌────────────────────────────────────────────────┐
│ Financing and Emissions Trends                 │
│ ┌──────────────┐  ┌────────────────┐          │
│ │ FUNDS        │  │ GHG LEVELS     │          │
│ │ MOBILIZED    │  │                │          │
│ └──────────────┘  └────────────────┘          │
└────────────────────────────────────────────────┘

CHANGES IMPLEMENTED:
--------------------

1. Created New Section Component
   File: src/components/sections/FinancingEmissionsTrendsV3.tsx
   - Single container with section title
   - Contains both charts side-by-side
   - Props: fundsData, ghgHistoricalData, ghgTargetData
   - Re-exports types for convenience

2. Updated Chart Components
   Files:
   - src/components/charts/FundsMobilizedChartV3.tsx
   - src/components/charts/GHGLevelsChartV3.tsx
   
   Changes:
   - Added showContainer prop (default: true)
   - When showContainer=false, renders only chart content without white card wrapper
   - Reduced font sizes when in section (16px title, 12px subtitle)
   - Conditional rendering: if showContainer, wraps in card; else returns content directly

3. Updated page.tsx
   - Replaced grid with two separate chart cards
   - Now uses single FinancingEmissionsTrendsV3 component
   - Simplified loading state (single skeleton instead of 2)
   - Cleaner code structure

COMPONENT STRUCTURE:
--------------------

FinancingEmissionsTrendsV3
├─ Section Title: "Financing and Emissions Trends"
├─ Grid (2 columns)
│  ├─ FundsMobilizedChartV3 (showContainer=false)
│  └─ GHGLevelsChartV3 (showContainer=false)

BENEFITS:
---------
✅ Matches Figma mockup exactly
✅ Better semantic structure (section → charts)
✅ More maintainable (single section component)
✅ Consistent with other sections
✅ All tests still passing (150/150)
✅ Build successful

FILES CREATED:
--------------
1. src/components/sections/FinancingEmissionsTrendsV3.tsx (52 lines)

FILES MODIFIED:
---------------
1. src/components/charts/FundsMobilizedChartV3.tsx
   - Added showContainer prop
   - Conditional container rendering
   - Reduced font sizes for section mode

2. src/components/charts/GHGLevelsChartV3.tsx
   - Added showContainer prop
   - Conditional container rendering
   - Reduced font sizes for section mode

3. src/app/page.tsx
   - Replaced grid layout with FinancingEmissionsTrendsV3 component
   - Updated imports
   - Simplified loading state

TEST RESULTS:
-------------
✓ All 150 tests passing (100% pass rate)
✓ No new test failures
✓ Build successful (120 kB)

NEXT STEPS FOR DATA INTEGRATION:
---------------------------------
User mentioned they have access to actual data from BAs (Business Analysts).
Suggested approach:

1. Review data structure from BAs
2. Update dashboardServiceV3.ts to handle real data
3. Replace mock data with actual API calls
4. Validate data transformations
5. Update chart components if data structure differs
6. Test with real data

FOLDERS STRUCTURE:
------------------
src/
├── components/
│   ├── sections/           ← NEW FOLDER
│   │   └── FinancingEmissionsTrendsV3.tsx
│   ├── charts/
│   │   ├── FundsMobilizedChartV3.tsx (modified)
│   │   └── GHGLevelsChartV3.tsx (modified)
│   └── ...
└── app/
    └── page.tsx (modified)

FIGMA ALIGNMENT STATUS:
-----------------------
✅ Section O4 (Financing & Emissions Trends) - NOW ALIGNED
✅ All other sections - Previously aligned
✅ Ready for real data integration

BUILD STATUS:
-------------
✓ Tests: 150/150 passing
✓ Build: Successful
✓ Size: 120 kB (main page)
✓ First Load JS: 236 kB
✓ No TypeScript errors
✓ Only ESLint warnings (unused vars, hook dependencies)

READY FOR:
----------
1. Real data integration
2. Further Figma refinements
3. Next sections implementation
